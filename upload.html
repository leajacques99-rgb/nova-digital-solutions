<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Files - Nova Digital</title>
      <link rel="icon" href="./favicon.png" type="image/png">
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Open Graph / Facebook / Zalo -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://leajacques99-rgb.github.io/Nova-digital-solutions/">
<meta property="og:title" content="Nova Digital - Premium Digital Marketing Agency">
<meta property="og:description" content="Leading Digital Marketing Strategic Partner. We combine creativity and data technology to optimize advertising performance (Google, Meta, TikTok) and drive real revenue growth for businesses.">
<meta property="og:image" content="https://images.unsplash.com/photo-1551434678-e076c223a692?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=630&q=80">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://leajacques99-rgb.github.io/Nova-digital-solutions/">
<meta property="twitter:title" content="Nova Digital - Premium Digital Marketing Agency">
<meta property="twitter:description" content="Leading Digital Marketing Strategic Partner. We combine creativity and data technology to optimize advertising performance (Google, Meta, TikTok) and drive real revenue growth for businesses.">
<meta property="twitter:image" content="https://images.unsplash.com/photo-1551434678-e076c223a692?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=630&q=80">

<!-- Meta Tags bổ sung cho SEO -->
<meta name="description" content="Leading Digital Marketing Strategic Partner. We combine creativity and data technology to optimize advertising performance (Google, Meta, TikTok) and drive real revenue growth for businesses.">
<meta name="author" content="Nova Digital">
    <style>
        :root {
            --primary: #2563EB;       /* Blue */
            --primary-dark: #1E40AF;
            --secondary: #0F172A;     /* Dark Navy */
            --white: #FFFFFF;
            --gray-100: #F1F5F9;
            --gray-400: #94A3B8;
            --border: #E2E8F0;
            --success: #10B981;
            --error: #EF4444;
            --warning: #F59E0B;
            --radius-lg: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; color: var(--secondary); display: flex; flex-direction: column; min-height: 100vh; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; }

        /* --- 1. HEADER STYLES (MATCHING YOUR STRUCTURE) --- */
        header { 
            background: rgba(255, 255, 255, 0.9); 
            backdrop-filter: blur(12px); 
            position: sticky; top: 0; z-index: 100; 
            border-bottom: 1px solid var(--border); 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        .nav-wrapper { 
            height: 80px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
        }

        .logo { 
            font-size: 1.6rem; 
            font-weight: 800; 
            color: var(--primary); 
            font-family: 'Inter', sans-serif; 
            display: flex; align-items: center; gap: 8px; 
        }
        .logo span { color: var(--secondary); }

        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-links li a { 
            font-weight: 500; color: var(--secondary); font-size: 0.95rem; 
        }
        .nav-links li a:hover { color: var(--primary); }

        .btn-cta { 
            background: var(--primary); 
            color: white; 
            padding: 10px 24px; 
            border-radius: 50px; 
            font-weight: 600; 
            font-size: 0.9rem;
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }
        .btn-cta:hover { background: var(--primary-dark); transform: translateY(-1px); }

        .mobile-menu-btn { display: none; font-size: 1.5rem; cursor: pointer; }

        /* Mobile Responsive for Header */
        @media (max-width: 768px) {
            .nav-links { display: none; } /* Hidden for simplicity in this demo */
            .mobile-menu-btn { display: block; }
            .btn-cta-nav { display: none; }
        }

        /* --- 2. UPLOAD SECTION --- */
        .main-content { flex: 1; display: flex; align-items: center; justify-content: center; padding: 60px 0; }
        
        .upload-card {
            background: var(--white);
            width: 100%; max-width: 700px;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
        }

        .section-title { font-family: 'Playfair Display', serif; font-size: 2rem; text-align: center; margin-bottom: 5px; }
        .subtitle { text-align: center; color: var(--gray-400); margin-bottom: 30px; font-size: 0.95rem; }

        /* Drop Zone */
        .drop-zone {
            border: 2px dashed var(--border);
            border-radius: var(--radius-lg);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #FAFAFA;
        }
        .drop-zone:hover, .drop-zone.dragover { border-color: var(--primary); background: #EFF6FF; transform: scale(1.01); }
        .icon-cloud { font-size: 3.5rem; color: var(--primary); margin-bottom: 15px; opacity: 0.8; }
        .browse-text { font-weight: 600; color: var(--primary); text-decoration: underline; }

        /* File List */
        .file-list { margin-top: 25px; list-style: none; max-height: 250px; overflow-y: auto; padding-right: 5px; }
        /* Scrollbar styling */
        .file-list::-webkit-scrollbar { width: 6px; }
        .file-list::-webkit-scrollbar-track { background: #f1f1f1; }
        .file-list::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

        .file-item {
            display: flex; align-items: center; justify-content: space-between;
            background: var(--white); border: 1px solid var(--border);
            padding: 12px 16px; margin-bottom: 10px; border-radius: 12px;
            transition: 0.2s;
        }
        .file-left { display: flex; align-items: center; gap: 14px; overflow: hidden; }
        .file-icon { font-size: 1.4rem; color: var(--gray-400); }
        .file-details { display: flex; flex-direction: column; overflow: hidden; }
        .file-name { font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 280px; font-size: 0.95rem; }
        .file-size { font-size: 0.75rem; color: var(--gray-400); }
        
        /* Status Badges */
        .status-badge { font-size: 0.7rem; font-weight: 700; padding: 4px 8px; border-radius: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .st-pending { background: var(--gray-100); color: var(--gray-400); }
        .st-uploading { background: #DBEAFE; color: var(--primary); }
        .st-success { background: #DCFCE7; color: var(--success); }
        .st-error { background: #FEE2E2; color: var(--error); }

        .btn-remove { background: none; border: none; color: var(--gray-400); cursor: pointer; padding: 6px; transition: 0.2s; }
        .btn-remove:hover { color: var(--error); background: #FEF2F2; border-radius: 50%; }

        /* Progress Bar */
        .progress-wrapper { height: 8px; background: var(--gray-100); border-radius: 10px; margin-top: 25px; overflow: hidden; display: none; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s ease-out; }

        /* Action Button */
        .btn-main {
            width: 100%; padding: 16px; border: none; border-radius: 50px;
            background: var(--primary); color: white; font-size: 1rem; font-weight: 600;
            margin-top: 25px; cursor: pointer; transition: 0.3s;
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3);
            opacity: 0.5; pointer-events: none;
        }
        .btn-main.active { opacity: 1; pointer-events: all; }
        .btn-main:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 15px 20px -3px rgba(37, 99, 235, 0.4); }

        /* --- 3. CUSTOM POPUP MODAL (The "Nice" Feature) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.5); /* Dim background */
            backdrop-filter: blur(8px);       /* Blur effect */
            z-index: 9999; display: none; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        .modal-overlay.show { display: flex; opacity: 1; }

        .modal-box {
            background: white; width: 90%; max-width: 420px;
            padding: 35px; border-radius: 24px; text-align: center;
            transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .modal-overlay.show .modal-box { transform: scale(1); }

        .modal-icon-wrapper {
            width: 80px; height: 80px; border-radius: 50%;
            display: inline-flex; align-items: center; justify-content: center;
            font-size: 32px; margin-bottom: 20px;
        }
        .icon-success { background: #DCFCE7; color: var(--success); }
        .icon-error { background: #FEE2E2; color: var(--error); }
        .icon-warning { background: #FEF3C7; color: var(--warning); }

        .modal-title { font-family: 'Playfair Display', serif; font-size: 1.6rem; margin-bottom: 10px; color: var(--secondary); }
        .modal-msg { color: var(--gray-400); margin-bottom: 30px; font-size: 1rem; line-height: 1.6; }
        
        .modal-btn {
            background: var(--secondary); color: white; border: none;
            padding: 14px 30px; border-radius: 12px; font-weight: 600; cursor: pointer;
            transition: 0.2s; width: 100%; font-size: 1rem;
        }
        .modal-btn:hover { background: #1E293B; transform: translateY(-1px); }

        /* Footer */
        footer { margin-top: auto; padding: 30px; text-align: center; color: var(--gray-400); font-size: 0.9rem; border-top: 1px solid var(--border); }
    </style>
<body>

    <!-- Header (Giữ nguyên menu cũ) -->
    <header>
        <div class="container nav-wrapper">
            <a href="https://leajacques99-rgb.github.io/Nova-digital-solutions/" class="logo">
                <i class="fa-solid fa-layer-group"></i>
                Nova<span>Digital</span>
            </a>
            
            <nav>
                <div class="mobile-menu-btn"><i class="fa-solid fa-bars"></i></div>
                <ul class="nav-links">
                    <li><a href="./form.html">Home</a></li>
                                        <li><a href="./form.html">Form</a></li>
                                        <li><a href="./upload.html">Uploads</a></li>
                                        <li><a href="./about.html">About Us</a></li>
                    <li><a href="./services.html">Services</a></li>
                    <li><a href="./team.html">Our Team</a></li>
                </ul>
            </nav>
       

            <a href="#contact" class="btn-cta btn-cta-nav">Get a Quote</a>
        </div>
    </header>

    <!-- Main Upload Section -->
    <div class="main-content">
        <div class="container">
            <!-- Center Card -->
            <div style="display: flex; justify-content: center;">
                <div class="upload-card">
                    <h2 class="section-title">Secure Asset Upload</h2>
                    <p class="subtitle">After completing the test, please send it to us and we will review it within 1-2 business days.</p>

                    <!-- Hidden Input -->
                    <input type="file" id="fileInput" multiple hidden>

                    <!-- Drag & Drop Zone -->
                    <div class="drop-zone" id="dropZone">
                        <i class="fa-solid fa-cloud-arrow-up icon-cloud"></i>
                        <h3>Drag & Drop files here</h3>
                        <p style="color: #94A3B8; margin-top: 5px;">or <span class="browse-text">browse your computer</span></p>
                    </div>

                    <!-- List of Selected Files -->
                    <ul class="file-list" id="fileList">
                        <!-- Items injected by JS -->
                    </ul>

                    <!-- Global Progress Bar -->
                    <div class="progress-wrapper" id="progressWrapper">
                        <div class="progress-fill" id="progressBar"></div>
                    </div>

                    <!-- Main Action Button -->
                    <button id="uploadBtn" class="btn-main">Start Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- CUSTOM POPUP MODAL -->
    <div class="modal-overlay" id="resultModal">
        <div class="modal-box">
            <div class="modal-icon-wrapper" id="modalIcon"></div>
            <h3 class="modal-title" id="modalTitle"></h3>
            <p class="modal-msg" id="modalMsg"></p>
            <button class="modal-btn" onclick="closeModal()">Close</button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Nova Digital Agency. All rights reserved.</p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- CONFIGURATION ---
        const CONFIG = {
            maxSizeMB: 150,
            endpoint: null //'/upload_handler.php' // Ensure this PHP file exists on server
        };

        // --- STATE MANAGEMENT ---
        let filesQueue = [];
        let isUploading = false;

        // --- DOM ELEMENTS ---
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const fileListEl = document.getElementById('fileList');
        const uploadBtn = document.getElementById('uploadBtn');
        const progressWrapper = document.getElementById('progressWrapper');
        const progressBar = document.getElementById('progressBar');
        
        // Modal Elements
        const modal = document.getElementById('resultModal');
        const modalIcon = document.getElementById('modalIcon');
        const modalTitle = document.getElementById('modalTitle');
        const modalMsg = document.getElementById('modalMsg');

        // --- EVENT LISTENERS ---
        
        // 1. Browse Click
        dropZone.addEventListener('click', () => !isUploading && fileInput.click());
        
        // 2. Drag & Drop Visuals
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => {
            dropZone.addEventListener(e, (ev) => { ev.preventDefault(); ev.stopPropagation(); });
        });
        ['dragenter', 'dragover'].forEach(e => dropZone.addEventListener(e, () => dropZone.classList.add('dragover')));
        ['dragleave', 'drop'].forEach(e => dropZone.addEventListener(e, () => dropZone.classList.remove('dragover')));

        // 3. Handle Files Drop & Select
        dropZone.addEventListener('drop', (e) => handleFiles(e.dataTransfer.files));
        fileInput.addEventListener('change', (e) => handleFiles(e.target.files));
        
        // 4. Start Upload
        uploadBtn.addEventListener('click', startUpload);

        // --- FUNCTIONS ---

        function handleFiles(files) {
            if (isUploading) return;
            const maxBytes = CONFIG.maxSizeMB * 1024 * 1024;
            let oversizeCount = 0;

            Array.from(files).forEach(file => {
                // Check size limit
                if (file.size > maxBytes) {
                    oversizeCount++;
                    return;
                }
                // Check duplicate (based on name & size)
                if (!filesQueue.some(f => f.file.name === file.name && f.file.size === file.size)) {
                    filesQueue.push({
                        id: Math.random().toString(36).substr(2, 9),
                        file: file,
                        status: 'pending' 
                    });
                }
            });

            if(oversizeCount > 0) {
                // Show a mini warning modal or just console for now, simple alert strictly for pre-validation
                showPopup('warning', 'File Skipped', `${oversizeCount} file(s) were too large (>150MB) and were not added.`);
            }

            renderList();
            updateBtnState();
            fileInput.value = ''; // Reset input
        }

        function renderList() {
            fileListEl.innerHTML = '';
            filesQueue.forEach(item => {
                // Determine icon based on type
                let icon = 'fa-file';
                if(item.file.type.includes('image')) icon = 'fa-file-image';
                if(item.file.type.includes('video')) icon = 'fa-file-video';
                if(item.file.type.includes('pdf')) icon = 'fa-file-pdf';
                if(item.file.type.includes('zip') || item.file.type.includes('compressed')) icon = 'fa-file-zipper';

                // Status Badge Logic
                let badge = '<span class="status-badge st-pending">Ready</span>';
                if(item.status === 'uploading') badge = '<span class="status-badge st-uploading"><i class="fa-solid fa-spinner fa-spin"></i> Uploading</span>';
                if(item.status === 'success') badge = '<span class="status-badge st-success">Success</span>';
                if(item.status === 'error') badge = '<span class="status-badge st-error">Failed</span>';

                const li = document.createElement('li');
                li.className = 'file-item';
                li.innerHTML = `
                    <div class="file-left">
                        <i class="fa-regular ${icon} file-icon"></i>
                        <div class="file-details">
                            <span class="file-name" title="${item.file.name}">${item.file.name}</span>
                            <span class="file-size">${(item.file.size/(1024*1024)).toFixed(2)} MB</span>
                        </div>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px;">
                        ${badge}
                        ${item.status === 'pending' ? `<button onclick="removeFile('${item.id}')" class="btn-remove" title="Remove"><i class="fa-solid fa-trash"></i></button>` : ''}
                    </div>
                `;
                fileListEl.appendChild(li);
            });
        }

        window.removeFile = function(id) {
            if(isUploading) return;
            filesQueue = filesQueue.filter(f => f.id !== id);
            renderList();
            updateBtnState();
        };

        function updateBtnState() {
            const pendingCount = filesQueue.filter(f => f.status === 'pending').length;
            if (pendingCount > 0) {
                uploadBtn.textContent = `Upload ${pendingCount} File(s)`;
                uploadBtn.classList.add('active');
            } else {
                uploadBtn.classList.remove('active');
                if(filesQueue.length > 0 && pendingCount === 0) {
                    uploadBtn.textContent = 'Process Complete';
                } else {
                    uploadBtn.textContent = 'Start Upload';
                }
            }
        }

        async function startUpload() {
            const pendingFiles = filesQueue.filter(f => f.status === 'pending');
            if(isUploading || pendingFiles.length === 0) return;

            isUploading = true;
            uploadBtn.textContent = 'Uploading...';
            progressWrapper.style.display = 'block';
            progressBar.style.width = '0%';

            const total = filesQueue.length; // Count total to keep progress bar smooth
            let successCount = 0;
            let errorCount = 0;

            // Process files
            for (let i = 0; i < filesQueue.length; i++) {
                if(filesQueue[i].status === 'pending') {
                    // Update main progress bar
                    const percent = ((i) / filesQueue.length) * 100;
                    progressBar.style.width = percent + '%';
                    
                    // Upload single file
                    const result = await uploadFile(filesQueue[i]);
                    if(result) successCount++;
                    else errorCount++;

                    renderList(); // Refresh badges
                } else if (filesQueue[i].status === 'success') {
                    successCount++;
                } else if (filesQueue[i].status === 'error') {
                    errorCount++;
                }
            }

            progressBar.style.width = '100%';
            isUploading = false;
            updateBtnState();

            // --- POPUP LOGIC ---
            setTimeout(() => {
                progressWrapper.style.display = 'none';
                
                // Only show popup for the batch just processed (or if all done)
                if (errorCount === 0 && successCount > 0) {
                    // Perfect
                    showPopup('success', 'Upload Successful!', `All ${successCount} files have been securely uploaded to the server.`);
                    // Optional: Clear list on success
                    // filesQueue = []; renderList(); updateBtnState();
                } else if (successCount === 0 && errorCount > 0) {
                    // Complete Failure
                    showPopup('error', 'Upload Failed', 'We could not upload your files. Please check your internet connection or server limits.');
                } else if (errorCount > 0) {
                    // Mixed
                    showPopup('warning', 'Completed with Issues', `${successCount} files uploaded successfully, but ${errorCount} files failed.`);
                }
            }, 600);
        }

        function uploadFile(item) {
    return new Promise(resolve => {
        // Fake uploading state
        item.status = 'uploading';
        renderList();

        // Fake delay giống upload thật
        setTimeout(() => {
            item.status = 'success';
            resolve(true);
        }, 600 + Math.random() * 800); // random cho giống thật
    });
}


        // --- POPUP UI HANDLER ---
        function showPopup(type, title, message) {
            let iconHtml = '';
            let iconClass = '';

            if (type === 'success') {
                iconHtml = '<i class="fa-solid fa-check"></i>';
                iconClass = 'icon-success';
            } else if (type === 'error') {
                iconHtml = '<i class="fa-solid fa-xmark"></i>';
                iconClass = 'icon-error';
            } else {
                iconHtml = '<i class="fa-solid fa-triangle-exclamation"></i>';
                iconClass = 'icon-warning';
            }

            modalIcon.innerHTML = iconHtml;
            modalIcon.className = 'modal-icon-wrapper ' + iconClass;
            modalTitle.textContent = title;
            modalMsg.textContent = message;

            modal.classList.add('show');
        }

        window.closeModal = function() {
            modal.classList.remove('show');
        }
    </script>
</body>

</html>
